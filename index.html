<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <title>Task Schedule</title>
</head>
<body>         
    <div class="taskWrapper">
        <div class="top" >
            <p style="font-weight: 600;">To-do List</p>
            <button id="addToDo" class="btn">
                <i data-lucide="plus"  class="lucideIcon"></i>
            </button>
            <div class="addToDoWrapper">
                <div class="addToDoForm">
                    <div class="top">
                        <p style="font-weight: 600;">Add task</p>
                        <button id="closeBtn" class="btn">
                            <i data-lucide="x" class="lucideIcon"></i>
                        </button>
                    </div>
                    <form action="" >
                        <input type="text" name="task" id="taskName" placeholder="Name">
                        <div class="timeWrapper">
                            <div>
                                <label for="startTime">Start time:</label>
                                <input type="time" name="" id="startTime">
                            </div>
                            <div>
                                <label for="endTime">End time:</label>
                                <input type="time" name="" id="endTime">
                            </div>
                          
                        </div>
                        <input type="submit" value="Add Task">
                    </form>
                </div>
            </div>
            
        </div>
        <ul id="todo" >
           
        </ul>
    </div>
  <script>
    lucide.createIcons();
    
    const formCloseBtn =  document.getElementById('closeBtn');
    const form = document.querySelector('form');
    const taskName = document.querySelector('form #taskName');
    const startTime = document.querySelector('form #startTime');
    const endTime = document.querySelector('form #endTime');
    const todoList = document.querySelector('#todo');

    const todoBtn = document.querySelector('#addToDo');
    const addToDoWrapper = document.querySelector('.addToDoWrapper');
    const taskWrapper =  document.querySelector('.taskWrapper');

    function checkList(){
        if(todoList.children.length <=0 ){
            const div = document.createElement('div');
            div.setAttribute('id', 'msg');

            const i = document.createElement('i');
            i.setAttribute('data-lucide', 'list-todo');
            div.appendChild(i);

            const p = document.createElement('p');
            p.innerHTML = "Currently no tasks to do.";
            div.appendChild(p);

            taskWrapper.appendChild(div);
            lucide.createIcons();
        } else {
            const msg = document.getElementById('msg');
            if (msg) {
                taskWrapper.removeChild(msg);
            }
            lucide.createIcons();
        }
    }
    
    function createTask(parent, name, startTime, endTime){
        const list = document.createElement('li');

        const input = document.createElement('input');
        input.setAttribute('type', 'checkbox');
        input.setAttribute('id', 'listcb');
        list.appendChild(input);

        const div = document.createElement('div');
            const p = document.createElement('p');
            p.classList.add('todoTask');
            p.innerHTML = name;
            div.appendChild(p);

            const p2 = document.createElement('p');
            p2.innerHTML = ` ${startTime} - ${endTime}`;
            div.appendChild(p2);
        list.appendChild(div);

        const button = document.createElement('button');
        button.classList.add('btn');
            const i = document.createElement('i');
            i.setAttribute('data-lucide', 'ellipsis');
            i.classList.add('lucideIcon');
        list.appendChild(i);

        parent.appendChild(list);

        input.addEventListener('change', ()=>{
            if(p.style.textDecoration == "line-through"){
                p.style.textDecoration = 'none';
                p.style.color = 'black';
                p2.style.color = "gray";

            } else {
                p.style.textDecoration = "line-through";
                p.style.color = "rgb(172, 172, 172)";
                p2.style.color = "rgb(172, 172, 172)";
            }
        });
    }

   
    formCloseBtn.onclick = ()=>{
        addToDoWrapper.style.display = 'none';
    }

    form.onsubmit = ()=>{
        event.preventDefault();
        createTask(todoList, taskName.value, startTime.value, endTime.value);
        addToDoWrapper.style.display = 'none';
        checkList();
    }
    checkList();

    todoBtn.addEventListener('click', ()=>{
        addToDoWrapper.style.display = 'flex';
    });
   
  </script>
</body>
</html>